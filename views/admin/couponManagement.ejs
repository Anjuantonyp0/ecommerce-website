<%- include('../partials/admin/adminHeader.ejs') %>
<!DOCTYPE html>
<html lang="en">
<head>
  <!-- Required meta tags -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <!-- Bootstrap CSS -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.2.1/dist/css/bootstrap.min.css"
      integrity="sha384-GJzZqFGwb1QTTN6wy59ffF1BuGJpLSa9DkKMp0DgiMDm4iYMj70gZWKYbI706tWS"
      crossorigin="anonymous">
      <!-- Include SweetAlert CSS -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11.0.19/dist/sweetalert2.min.css">

<!-- Include SweetAlert JS -->
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.0.19/dist/sweetalert2.all.min.js"></script>

  <style>
      body {
          font-family: 'Arial', sans-serif;
          background-color: #f8f9fa;
          padding: 20px;
      }

      h2 {
          margin-bottom: 20px;
      }
      

      table {
          width: 100%;
          margin-top: 20px;
          border-collapse: collapse;
          background-color: #eee;
          box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
      }

      th, td {
          padding: 20px;
          text-align: left;
          border-bottom: 1px solid #dee2e6;
      }

      th {
          background-color: #343a40;
          color: #fff;
      }

      tbody tr:hover {
          background-color: #f5f5f5;
      }

      .add-product-btn {
          margin-bottom: 10px;
      }

      .action-btns {
          display: flex;
          justify-content: space-between;
      }

      .action-btns a {
          margin-right: 10px;
      }
  </style>
  <title>Coupon Management</title>
</head>
<body>
  <h1>Coupon Management</h1>

<div
  class="container-table"
  style="
    display: flex;
    justify-content: center;
    width: 90%;
    align-items: center;
    text-align: center;
    padding: 200px;
    margin: auto;
    flex-direction: column;
    background-color: rgb(234, 233, 233);
    height: 100%;
    width: 100%;
  "
>
<a href="/admin/add-coupon"><button class="btn-success" >Add Coupon</button></a>
  <table class="table-success table  table-hover" style="margin-top: 50px;">
 
    <thead class="bg- text-dark">
      <tr>
        <th scope="col">No</th>
        <th scope="col">Coupon Code</th>
        <th scope="col">Disound Percentage</th>
        <th scope="col">Max discount</th>
        <th scope="col">Expiry Date</th>
        <th scope="col">Status</th>
        <th scope="col">Expiry</th>
        <th scope="col">Delete</th>
      </tr>
    </thead>
    <% offer.forEach((code, index) => { %>
    <tbody>
      
        <tr style="margin: auto">
          <th scope="row"><%= index+1 %></th>
          <td><%= code.couponCode %></td>
          <td><%= code.discountPercentage %>%</td>
          <td><%= code.maxDiscount %></td>
          <td><%= code.expires.toLocaleDateString() %></td>
          <td><% if (code.active) { %>
             <span style="border-radius: 25px; color: rgb(0, 0, 0); padding: 5px;background-color: rgb(150, 148, 169);"  >Unused</span>
          <% }else{ %>
            <span style="border-radius: 25px; color: rgb(255, 255, 255); padding: 5px;background-color: rgb(198, 7, 7);"  >Used</span>

            <% } %>
          </td>
          <td>
          <% if (code.expired) { %>
            <span style="border-radius: 25px; color: rgb(255, 255, 255); padding: 5px;background-color: rgb(198, 7, 7);"  >Inactive</span>            
          <% }else{ %>
            <span style="border-radius: 25px; color: rgba(16, 15, 15, 0.911); padding: 5px;background-color: rgb(7, 198, 55);">Active</span>
            <% } %>
          </td>
          
          <td>
            <a href="/admin/delete-coupon/<%= code._id %>"><button class="btn-danger" style="border-radius: 25px">delete</button></a>
          </td>
        </tr>
     
    </tbody>
     <% }) %>
  </table>
</div>
</body>
</html>