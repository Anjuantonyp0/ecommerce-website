<%- include('../partials/user/userHeader.ejs') %>

  <!DOCTYPE html>
  <html lang="en">

  <head>
    <meta charset="UTF-8">
    <meta name="description" content="Ashion Template">
    <meta name="keywords" content="Ashion, unica, creative, html">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>user profile</title>

    <!-- Google Font -->
    <link href="https://fonts.googleapis.com/css2?family=Cookie&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700;800;900&display=swap"
      rel="stylesheet">

    <!-- Css Styles -->
    <link rel="stylesheet" href="css/bootstrap.min.css" type="text/css">
    <link rel="stylesheet" href="css/font-awesome.min.css" type="text/css">
    <link rel="stylesheet" href="css/elegant-icons.css" type="text/css">
    <link rel="stylesheet" href="css/jquery-ui.min.css" type="text/css">
    <link rel="stylesheet" href="css/magnific-popup.css" type="text/css">
    <link rel="stylesheet" href="css/owl.carousel.min.css" type="text/css">
    <link rel="stylesheet" href="css/slicknav.min.css" type="text/css">
    <link rel="stylesheet" href="css/style.css" type="text/css">
  </head>
<br>
<br>
  <body class="mt-5 pt-5">

    <section>
      <style>
        /* Add this CSS to your existing styles or create a new styles.css file */

        body {
          font-family: 'Arial', sans-serif;
          margin: 0;
          padding: 0;
          background-color: #f8f9fa;
        }

        header {
          background-color: #f8f9fa;
          color: #fff;
          padding: 1em;
          text-align: center;
        }

        main {
          margin: 20px;
        }

        section {
          background-color: #fff;
          padding: 20px;
          border-radius: 8px;
          box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }

        .card {
          border: none;
          border-radius: 10px;
          box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        .card-body {
          padding: 20px;
        }

        .card img {
          border-radius: 50%;
          border: 4px solid #fff;
        }

        .list-group-item {
          border: none;
          border-radius: 5px;
        }

        .list-group-item:hover {
          background-color: #f8f9fa;
        }

        .card.mb-4 {
          margin-bottom: 20px;
        }

        .card p {
          margin-bottom: 0;
        }

        .card hr {
          margin: 15px 0;
        }

        ul {
          list-style-type: none;
          padding: 0;
        }

        .addresslist {
          margin-bottom: 15px;
          padding: 10px;
          border: 1px solid #ddd;
          border-radius: 5px;
        }

        footer {
          background-color: #343a40;
          color: #fff;
          padding: 1em;
          text-align: center;
          position: fixed;
          bottom: 0;
          width: 100%;
        }
      </style>

<body class="mt-5 pt-3">
  <h2 style="text-align: center;">My Account</h2>
  <div class="row">
      <div class="col-lg-4">
          <div class="card mb-4">
              <div class="card-body text-center">
                  <img src="https://mdbcdn.b-cdn.net/img/Photos/new-templates/bootstrap-chat/ava3.webp" alt="avatar" class="rounded-circle img-fluid" style="width: 150px;">
                  <h5 class="my-3">
                      <%= user.name %>
                  </h5>
              </div>
          </div>
          <div class="card mb-4 mb-lg-0">
              <div class="card-body p-0">
                  <ul class="list-group list-group-flush rounded-3">
                      <li class="list-group-item d-flex justify-content-between align-items-center p-3">
                          <i class="fa fa-map-marker fa-lg text-warning"></i>
                          <p class="mb-0"> <a href="/add-address">Add Address</a></p>
                      </li>
                      <li class="list-group-item d-flex justify-content-between align-items-center p-3">
                          <i class="fa fa-shopping-bag fa-lg" style="color: #55acee;"></i>
                          <p class="mb-0"> <a href="/vieworderdetails">View Orders</a></p>
                      </li>
                      <li class="list-group-item d-flex justify-content-between align-items-center p-3">
                          <i class="fa fa-shopping-bag fa-lg" style="color: #55acee;"></i>
                          <p class="mb-0"> <a href="/walletPage">Wallet page</a></p>
                      </li>
                      <li class="list-group-item d-flex justify-content-between align-items-center p-3">
                          <i class="fas fa-edit fa-lg" style="color: #ac2bac;"></i>
                          <p class="mb-0"> <a href="/edit-profile/:id">Edit Profile</a></p>
                      </li>
                      <li class="list-group-item d-flex justify-content-between align-items-center p-3">
                          <i class="fas fa-lock fa-lg" style="color: #3b5998;"></i>
                          <p class="mb-0"><a href="/change-password/:id">Change Password</a></p>
                      </li>
                      <li class="list-group-item d-flex justify-content-between align-items-center p-3">
                          <i class="fas fa-lock fa-lg" style="color: #3b5998;"></i>
                          <p class="mb-0"><a href="/coupons">Coupons</a></p>
                      </li>
                  </ul>
              </div>
          </div>
      </div>
      <div class="col-lg-8">
          <div class="card mb-4">
              <div class="card-body">
                  <div class="row">
                      <div class="col-sm-3">
                          <p class="mb-0">Full Name</p>
                      </div>
                      <div class="col-sm-9">
                          <p class="text-muted mb-0">
                              <%= user.name %>
                          </p>
                      </div>
                  </div>
                  <hr>
                  <div class="row">
                      <div class="col-sm-3">
                          <p class="mb-0">Email</p>
                      </div>
                      <div class="col-sm-9">
                          <p class="text-muted mb-0">
                              <%= user.email %>
                          </p>
                      </div>
                  </div>
                  <hr>
                  <div class="row">
                      <div class="col-sm-3">
                          <p class="mb-0">Phone</p>
                      </div>
                      <div class="col-sm-9">
                          <p class="text-muted mb-0">
                              <%= user.phone %>
                          </p>
                      </div>
                  </div>
                  <hr>
                  <div class="row">
                      <div class="col-sm-3">
                          <p class="mb-0">Addresses</p>
                      </div>
                      <div class="col-sm-9">
                          <p class="text-muted mb-0">
                              <ul>
                                  <% if(address) { %>
                                      <% address.addresses.forEach((address, index) => { %>
                                          <div class="addresslist">
                                              <p>Address <%= index + 1 %>:</p>
                                              <p><%= address.houseName %></p>
                                              <p><%= address.postOffice %></p>
                                              <p><%= address.district %></p>
                                              <p><%= address.pin %></p>
                                              <p class="mb-0"> <a href="/edit-address/<%= address._id %>">Edit Address</a></p>
                                              <p class="mb-0"> <a href="#" onclick="confirmDelete('<%= address._id %>')">Delete Address</a></p>
                                          </div>
                                      <% }) %>
                                  <% } else { %>
                                      <p>No address available</p>
                                  <% } %>
                              </ul>
                          </p>
                      </div>
                  </div>
                  <hr>
              </div>
          </div>
      </div>
  </div>
  </div>
  </section>
  <div class="footer__copyright__text"></div>
</body>

<script>
      function confirmDelete(addressId) {
        if (confirm("Are you sure you want to delete this address?")) {
          window.location.href = "/delete-address/" + addressId;
        } else {
          // Do nothing or handle cancellation
        }
      }
</script>
</body>
</html>